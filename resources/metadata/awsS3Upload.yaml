metadata:
  name: awsS3Upload
  description: "Uploads a specified file into a given AWS S3 Bucket"
  longDescription: |
    Uploads a specified file as a S3 Object into a given AWS S3 Bucket.
    If the Bucket already contains a file with the same name, it will be overidden.
spec:
  inputs:
    secrets:
      - name: awsCredentialsId
        description: Jenkins 'Secret Text' credentials ID containing the JSON file to authenticate to the AWS S3 Bucket
        type: jenkins
    params:
      - name: jsonCredentialsAWS
        description: JSON String Credentials to access AWS S3 Bucket
        type: string
        mandatory: true
        scope:
          - PARAMETERS
        secret: true
        resourceRef:
          - name: awsCredentialsId
            type: secret
      - name: filePath
        resourceRef:
          - name: commonPipelineEnvironment
            param: mtarFilePath
        type: string
        mandatory: true
        description: "Name/Path of the file which should be uploaded"
        scope:
          - PARAMETERS
          - STAGES
          - STEPS
          - GENERAL
